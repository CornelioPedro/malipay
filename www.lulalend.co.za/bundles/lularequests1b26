var clientDeviceData=function(){"use strict";function t(){const t=n.init();return{osName:t.os.name,osVersion:t.os.version,browserName:t.browser.name,browserVersion:t.browser.version,userAgent:navigator.userAgent,appVersion:navigator.appVersion,platForm:navigator.platform,vendor:navigator.vendor}}const n={options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],dataOs:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],dataBrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){const n=this.header.join(" "),t=this.matchItem(n,this.dataOs),i=this.matchItem(n,this.dataBrowser);return{os:t,browser:i}},matchItem:function(n,t){for(var u,e,o,s,i,f,r=0;r<t.length;r+=1)if(e=new RegExp(t[r].value,"i"),s=e.test(n),s){if(o=new RegExp(t[r].version+"[- /:;]([\\d._]+)","i"),i=n.match(o),f="",i&&i[1]&&(i=i[1]),i)for(i=i.split(/[._]+/),u=0;u<i.length;u+=1)f+=u===0?i[u]+".":i[u];else f="0";return{name:t[r].name,version:parseFloat(f)}}return{name:"unknown",version:0}}};return{GetDeviceInfo:function(){return t()}}}(),requestTracker=function(){function e(e,s,h){typeof e!="undefined"&&e!==""&&e!==null&&(t=e,r=h,i=typeof s=="undefined"||s===""||s===null?a():s,u(n).then(t=>f(t).then(t=>{n=t,"serviceWorker"in navigator?(navigator.serviceWorker.addEventListener("message",function(n){o(n.data)}),navigator.serviceWorker.register("/sw.js").then(function(n){n.installing?console.log("Service worker installing"):n.waiting?console.log("Service worker installed"):n.active&&console.log("Service worker active")}).catch(function(n){console.log(`Registration failed with ${n}`)})):console.log("Service workers are not supported.")})))}function o(u){if(u.url!==t&&!u.url.includes("api.ipify.org")){u.uuid=i;u.cookies=h();u.params=s(u.url);u.device=n;const e=JSON.stringify(u),o=btoa(e),f={};f.request=o;const c=JSON.stringify(f);$.ajax({url:t,type:"POST",async:!0,data:c,crossDomain:!0,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:function(n){n.setRequestHeader("X-Request-Log","true");n.setRequestHeader("ls-ds-auth",r)}})}}function s(n){const t=[],i=n.split("?");if(i.length>1){const n=i[1],r=n.split("&");r.forEach(function(n){const i=n.split("=");t.push({Key:i[0],Value:i[1]})})}return t}function h(){const n=[],t=document.cookie.split(";");return t.forEach(function(t){const i=t.split("=");n.push({Key:i[0],Value:i[1]})}),n}function c(n,t,i){const r=new Date;r.setTime(r.getTime()+i*864e5);document.cookie=n+"="+t+"; expires="+r.toGMTString()}function l(n,t){const i=n+"=",r=document.cookie.split(";");for(let n=0;n<r.length;n++){let t=r[n];while(t.charAt(0)===" ")t=t.substring(1,t.length);if(t.indexOf(i)===0)return t.substring(i.length,t.length)}return t}function a(){var n=l("lula_uuid","");return(typeof n=="undefined"||n==="")&&(n=v(),c("lula_uuid",n,90)),n}function v(){"use strict";const n={};return n.uuid4=function(){for(var n="",t=0;t<32;t+=1)switch(t){case 8:case 20:n+="-";n+=(Math.random()*16|0).toString(16);break;case 12:n+="-";n+="4";break;case 16:n+="-";n+=(Math.random()*4|8).toString(16);break;default:n+=(Math.random()*16|0).toString(16)}return n},n.uuid4()}var n,i,t,r;const u=function(n){return new Promise(function(t,i){try{typeof n!="undefined"&&typeof n.ipAddress!="undefined"?t(n):$.getJSON("https://api.ipify.org?format=jsonp&callback=?",function(n){const i={};i.ipAddress=n.ip;t(i)})}catch(r){console.error(r);i()}})},f=function(n){return new Promise(function(t,i){try{if(typeof n=="undefined")throw"Device data not initialised";const i=clientDeviceData.GetDeviceInfo();n.osName=i.osName;n.osVersion=i.osVersion;n.browserName=i.browserName;n.browserVersion=i.browserVersion;n.userAgent=i.userAgent;n.appVersion=i.appVersion;n.platForm=i.platForm;n.vendor=i.vendor;t(n)}catch(r){console.error(r);i()}})};return{RegisterServiceWorker:function(n,t,i){e(n,t,i)}}}()